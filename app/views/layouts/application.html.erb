<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>shopfizz</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A production ready example Rails app that's using Docker and Docker Compose.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Darumadrop+One&family=Hachi+Maru+Pop&family=Palette+Mosaic&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/484e6509e8.js" crossorigin="anonymous"></script>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= javascript_include_tag "application", "data-turbo-track": "reload", type: "module" %>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <%# Generated with: https://realfavicongenerator.net/ %>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#61b9d2">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
  </head>

  <body class="flex flex-col h-screen justify-between hachi-maru-pop-regular">
    <div class='bg-gradient-to-b from-pink-500 to-purple-800 mb-8 z-10'>
      <div class='container mx-auto flex max-w-4xl items-center px-2 py-5'>
        <div class='mx-auto flex w-full flex-wrap items-center'>
          <div class='flex w-full justify-center font-extrabold text-white lg:w-1/2 lg:justify-start'>
            <%= link_to root_path, class: "text-2xl text-rose-800 no-underline hover:text-rose-800 hover:no-underline" do %>
              <%= image_tag('home.png', class: 'inline-block h-12 w-12') %> &nbsp; <span class=' text-gray-200'>shopfizz</span>
            <% end %>
          </div>
          <div class='flex w-full content-center justify-between pt-2 lg:w-1/2 lg:justify-end lg:pt-0'>
          <ul class='list-reset flex flex-1 items-center justify-center space-x-8 lg:flex-none h-12'>
            <% if admin_signed_in? %>
              <!-- 注文履歴 -->
              <li class='no-underline'>
                <div class="flex items-center justify-center">
                  <%= link_to admin_root_path, class: "flex flex-col items-center text-center" do %>
                    <p class="icon-text text-white leading-none mb-2 mr-2">注文履歴</p>
                    <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"/>
                    </svg>
                  <% end %>
                </div>
              </li>
        
              <!-- 顧客情報 -->
              <li class='no-underline'>
                <div class="flex items-center justify-center">
                  <%= link_to admin_customers_path, class: "flex flex-col items-center text-center" do %>
                    <p class="icon-text text-white leading-none mb-2 mr-2">顧客情報</p>
                    <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                      <circle cx="9" cy="7" r="4"></circle>
                      <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                      <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                  <% end %>
                </div>
              </li>
        
              <!-- 商品情報 -->
              <li class='no-underline'>
                <div class="flex items-center justify-center">
                  <%= link_to admin_products_path, class: "flex flex-col items-center text-center" do %>
                    <p class="icon-text text-white leading-none mb-2 mr-6">商品情報</p>
                    <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">
                      <path fill="white" d="M11.5 23l-8.5-4.535v-3.953l5.4 3.122 3.1-3.406v8.772zm1-.001v-8.806l3.162 3.343 5.338-2.958v3.887l-8.5 4.534zm-10.339-10.125l-2.161-1.244 3-3.302-3-2.823 8.718-4.505 3.215 2.385 3.325-2.385 8.742 4.561-2.995 2.771 2.995 3.443-2.242 1.241v-.001l-5.903 3.27-3.348-3.541 7.416-3.962-7.922-4.372-7.923 4.372 7.422 3.937v.024l-3.297 3.622-5.203-3.008-.16-.092-.679-.393v.002z"/>
                    </svg>
                  <% end %>
                </div>
              </li>
                <li class='no-underline'>
                  <div class="flex items-center justify-center">
                    <div class="relative inline-block text-left dropdown">
                    <p class="px-3 text-white no-underline mb-1 mr-6">アカウント</p>
                      <button class="inline-flex justify-center w-full px-4 py-0 text-sm font-medium leading-5 text-gray-700 transition duration-150 ease-in-out  rounded-md" type="button" aria-haspopup="true" aria-expanded="true" aria-controls="headlessui-menu-items-117">
                        <svg class="h-6 w-6" id="dropdownDividerButton" data-dropdown-toggle="dropdownDivider" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                          <path fill="white" d="M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0zm544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z"/>
                        </svg>
                      </button>
                      <div class="opacity-0 invisible dropdown-menu transition-all duration-300 transform origin-top-right -translate-y-2 scale-95">
                        <div class="absolute right-0 w-56 mt-2 origin-top-right bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg outline-none" aria-labelledby="headlessui-menu-button-1" id="headlessui-menu-items-117" role="menu">
                          <div class="px-4 py-3">         
                            <p class="text-sm font-medium leading-5 text-gray-900 truncate"><%= current_admin.email %></p>
                            <p class="text-sm leading-5">としてログイン中</p>
                          </div>
                          <div class="py-1">
                            <%= link_to destroy_admin_session_path, data: { turbo_method: :delete }, class: "text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" do %>
                              ログアウト
                            <% end %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
              <% elsif customer_signed_in? %>
                <li class='text-white no-underline'>
                <div class="flex items-end">
                  <p class="px-3 text-white no-underline">商品一覧</p>
                </div>
                  <%= link_to products_path, class: "p-4 relative border-2 border-transparent rounded-full focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out flex" do %>
                    <svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">
                      <path fill="white" d="M11.5 23l-8.5-4.535v-3.953l5.4 3.122 3.1-3.406v8.772zm1-.001v-8.806l3.162 3.343 5.338-2.958v3.887l-8.5 4.534zm-10.339-10.125l-2.161-1.244 3-3.302-3-2.823 8.718-4.505 3.215 2.385 3.325-2.385 8.742 4.561-2.995 2.771 2.995 3.443-2.242 1.241v-.001l-5.903 3.27-3.348-3.541 7.416-3.962-7.922-4.372-7.923 4.372 7.422 3.937v.024l-3.297 3.622-5.203-3.008-.16-.092-.679-.393v.002z"/>
                    </svg>
                  <% end %>
                </li>
                <li class='text-white no-underline'>
                <div class="flex items-end">
                  <p class="px-3 text-white no-underline">カート</p>
                </div>
                  <%= link_to cart_items_path, class: "p-4 relative border-2 border-transparent rounded-full focus:outline-none focus:text-gray-500 transition duration-150 ease-in-out flex" do %>
                    <svg class="h-6 w-6" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
                      <path fill="white" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    
                    <span class="absolute top-0 right-0">
                      <div class="inline-flex items-center px-1.5 py-0.4 border-2 border-white rounded-full text-xs font-semibold leading-4 bg-red-500 text-white">
                        <%= total_quantity(current_customer.cart_items) %>
                      </div>
                    </span>
                  <% end %>
                </li>
                <li class='no-underline'>
                  <div class="flex items-center justify-center">
                    <div class="relative inline-block text-left dropdown">
                    <p class="px-3 text-white no-underline">アカウント</p>
                      <button class="inline-flex justify-center w-full px-4 py-4 text-sm font-medium leading-5 text-gray-700 transition duration-150 ease-in-out  rounded-md" type="button" aria-haspopup="true" aria-expanded="true" aria-controls="headlessui-menu-items-117">
                        <svg class="h-6 w-6" id="dropdownDividerButton" data-dropdown-toggle="dropdownDivider" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                          <path fill="white" d="M288 320a224 224 0 1 0 448 0 224 224 0 1 0-448 0zm544 608H160a32 32 0 0 1-32-32v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 0 1-32 32z">
                          </path>
                        </svg>
                      </button>
                      <div class="opacity-0 invisible dropdown-menu transition-all duration-300 transform origin-top-right -translate-y-2 scale-95">
                        <div class="absolute right-0 w-56 mt-2 origin-top-right bg-white border border-gray-200 divide-y divide-gray-100 rounded-md shadow-lg outline-none" aria-labelledby="headlessui-menu-button-1" id="headlessui-menu-items-117" role="menu">
                          <div class="px-4 py-3">         
                            <p class="text-sm font-medium leading-5 text-gray-900 truncate"><%= current_customer.email %></p>
                            <p class="text-sm leading-5">としてログイン中</p>
                          </div>
                          <div class="py-1">
                            <%= link_to edit_customer_registration_path, class: "text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" do %>
                              アカウント設定
                            <% end %>
                            <%= link_to orders_path, class: "text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" do %>
                              注文履歴
                            <% end %>
                          </div>
                          <div class="py-1">
                            <%= link_to destroy_customer_session_path, data: { turbo_method: :delete }, class: "text-gray-700 flex justify-between w-full px-4 py-2 text-sm leading-5 text-left" do %>
                              ログアウト
                            <% end %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </li>
                <li class='text-white'>
                <p class="px-3 text-white">お問い合わせ</p>
                  <button class="inline-flex justify-center w-full px-4 py-2 text-sm font-medium leading-5 text-gray-700 transition duration-150 ease-in-out  rounded-md" type="button" aria-haspopup="true" aria-expanded="true" aria-controls="headlessui-menu-items-117">
                    <li class='text-white'>
                      <%= link_to image_tag('messages.png', alt: 'お問い合わせ', class: 'inline-block mr-2 w-6 h-6 filter brightness-0 invert'), new_contact_path, class: "inline-block px-6 py-2 text-white font-semibold rounded-lg" %>
                    </li>
                  </button>             
              <% else %>
                <!-- 未ログイン時のナビゲーション -->
                <% if request.path.start_with?("/admins") %>
                  <li class='px-4 text-white no-underline'>
                    <%= link_to "管理者ログイン", new_admin_session_path %>
                  </li>
                  <li class='px-4 text-white no-underline'>
                    <%= link_to "利用者ログイン", new_customer_session_path %>
                  </li>
                  <li class='px-4 text-white no-underline'>
                    <%= button_to '管理者ゲスト', guest_admin_sign_in_path, method: :post, class: 'btn btn-danger' %>
                  </li>
                <% else %>
                  <li class='px-4 text-white no-underline'>
                    <%= link_to "管理者ログイン", new_admin_session_path %>
                  </li>
                  <li class='px-4 text-white no-underline'>
                    <%= link_to "利用者ログイン", new_customer_session_path %>
                  </li>
                  <li class='px-4 text-white no-underline'>
                    <%= link_to "新規会員登録", new_customer_registration_path %>
                  </li>
                  <li class='px-4 text-white no-underline'>
                    <%= button_to '管理者ゲスト', guest_admin_sign_in_path, method: :post, class: 'btn btn-danger' %>
                  </li>
                  <li class='px-4 text-white no-underline'>
                    <%= button_to '顧客ゲスト', guest_customer_sign_in_path, method: :post, class: 'btn btn-primary' %>
                  </li>
                <% end %>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <% if flash[:notice] %>
      <div class="p-4 mb-4 text-md text-blue-700 text-center font-bold">
        <%= notice %>
      </div>
    <% end %>
    <% if flash[:alert] %>
      <div class="p-4 mb-4 text-md text-red-700 text-center font-bold">
        <%= alert %>
      </div>
    <% end %>

    <main class="container mx-auto sm:w-10/12 lg:w-9/12 mb-8 z-0">
      <%= yield %>
    </main>

    <style>
    .dropdown:focus-within .dropdown-menu {
      opacity:1;
      transform: translate(0) scale(1);
      visibility: visible;
    }

    .hachi-maru-pop-regular {
      font-family: "Hachi Maru Pop", cursive;
      font-weight: 400;
      font-style: normal;
    }

    .text-3xl.font-bold {
      color: #2E4D35  /* ここで文字色を変更 */
    }
    </style>

    <footer class="text-center mt-6 pb-6 h-10" style="color: #2E4D35";>
      <p class="text-gray-500">
      Copyright © DIVIC Corp WEP202407 All Rights Reserved.
    </footer>
  </body>
</html>
